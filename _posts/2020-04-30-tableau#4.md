---
layout: post
title: '[Tableau 팁] LOD식으로 전년 대비 성장률 구하기(YOY)'
category : [Tableau]
tag: [Tableau 팁]
---

# 전년 대비 성장률 (YOY) 구하기 

LOD 식을 활용하여 전년도 대비 매출이 얼마나 성장했는지를 알아보는 시트를 제작해보겠습니다!

**사용할 데이터 : Sample Superstore**

1. 먼저 행 선반에 Order date (년도) , 텍스트에 Sales 를 끌고 옵니다. (마크 유형 텍스트 )

![1](https://i.imgur.com/AW9ovcX.png)

2. LOD 식을 활용하여 최근 연도 필드를 만듭니다. 

![2](https://i.imgur.com/it596xL.png)

LOD 식은 원래 이렇게 생겼습니다. 
```
{ 키워드 [차원] : 집계 }  
```
* 키워드 : fixed, include, exclude 등의 **세부 수준 식**
* 차원 : [고객 id] 와 같이 매출 같은 측정값이 아닌 **뷰 표시의 기준점** 
* 집계 :  Max([날짜]) 나 SUM([매출]) 과 같이 **특정 함수에 의해 계산된 식**

  위의 사진에서는 LOD 식의 시작에 키워드와 차원을 넣지 않고, 중괄호만 표시했습니다.

  이렇게 하면 태블로는 특정 차원의 수준에 구애받지 않고 항상 모든 데이터 셋을 스캔한 뒤 항상 가장 최근의 연도만 불러오게 됩니다.   


3. 아까 만든 최근 연도 필드를 차원 탭에 드래그 합니다. 

  왜 이렇게 하냐면 우리가 만든 **최근 연도** 는 어떤 측정값으로 사용된다기보다 특정한 값을 표시하는 **기준** 이 될 것이기 때문입니다. 

  즉, **최근 연도를 기준으로 한** 매출 이나 이익이 우리가 관심있는 지표이지,     

  최근 연도의 측정값 예를들어 2019년 그 자체를 막대그래프로 표현할 게 아니기 때문입니다.       
 
4. 최근 연도 필드를 행 선반의 년 옆에 드래그 합니다. 

![3](https://i.imgur.com/47cyD4d.png)

  필드명이 다 표시되지 않으면 엑셀처럼 표를 드래그해서 크기를 늘려줍니다!      

5. 최근 연도 매출 필드를 만들고, 필드를 끌어 뷰에서 매출이 있는 곳으로 드래그 합니다!

![4](https://i.imgur.com/q4VCTHY.png)

![5](https://i.imgur.com/gvvrfoW.png)

그러면 자동으로 측정값 이름에 필터가 걸리고, 자동으로 측정값 카드에 두개의 값이 생기게 됩니다!    
    
이렇게 갑자기 필터 카드가 생기니 복잡해 보이실 텐데, 이렇게 되는 이유가 있습니다!    

태블로에서는 여러가지 측정값을 하나의 뷰에 표현해야 할 때가 많은데,      
행 선반과 열 선반에 여러가지 측정값을 올리게 되면 항상 **두 개의 그래프** 로 나타납니다.    
그렇다고 텍스트 마크에 추가하자니 앞서 올렸던 매출과 같은 컬럼에 놓여서, 분리해서 보기가 불편합니다.   

그래서 태블로에서는 표현하고 싶은 측정값이 두개 이상일 경우, 이미 표현된 측정값 위에 또 다른 측정값을 올리면 바로 새로운 컬럼인 **측정값 이름** 을 생성하고, 자동으로 필터 카드에서는 우리가 올린 측정값만 필터링하게 됩니다.        
그리고 마크 박스 하단의 **측정값 카드** 에서 우리가 올린 측정값의 목록을 확인할 수 있게 해줍니다.     

이렇게 두 개 이상의 측정값을 하나의 뷰에 표시하고 싶으시다면 뷰 안에 측정값 필드 자체를 끌고 오시면 됩니다!    

6. 




